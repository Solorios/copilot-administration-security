
name: Copilot Usage Report
on:
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      # 1) Generar el reporte de uso de Copilot
      - name: Copilot Usage
        uses: austenstone/copilot-usage@v5.2
        with:
          github-token: ${{ secrets.COPILOT }}
          organization: 'Solorios'
          csv: true

      # 2) Subir el archivo Markdown generado por copilot-usage
      # Este Action crea copilot-usage-report.md en el workspace
      - name: Verificar archivos generados
        run: |
          ls -la
          echo "Contenido del Markdown:"
          head -n 50 copilot          head -n 50 copilot-usage-report.md || echo "Archivo no encontrado"

      - name: Subir Markdown como artifact
        uses: actions/upload-artifact@v4
        with:
          name: copilot-usage-report
