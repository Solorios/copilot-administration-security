
name: Copilot Usage Report
on:
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      # 1) Generar el reporte de uso de Copilot
      - name: Copilot Usage
        uses: austenstone/copilot-usage@v5.2
        with:
          github-token: ${{ secrets.COPILOT }}   # PAT autorizado con SAML
          organization: 'Solorios'               # Slug exacto de la organización
          csv: true                              # Genera CSV además del summary

      # 2) Crear el resumen en Markdown y subirlo como artifact
      - name: Job Summary (Markdown)
        uses: austenstone/job-summary@v2.0
        with:
          name: copilot-usage-report
          create-md: 'true'                      # Genera archivo .md
